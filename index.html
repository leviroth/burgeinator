<!DOCTYPE html>
<html>
    <head>
        <title>A new Burgeinator</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <script>
        $(document).ready(function(){

            String.prototype.pluralize = function(count, plural){
                if (plural == null)
                    plural = this + 's';

                return count == 1 ? this : plural;
            }

            $("#burgeinate").click(function(){
                $("#output").empty();

                limit = $("#limit").val();
                if (!$.isNumeric(limit))
                {
                    //$("#limit").notify("We need a number here.");
                    $("#error").text("We need a number here.");
                    return;
                }
                else
                {
                    $("#error").empty();
                }

                sentences = $("#essay").val().split(/[.!?]["'\u2019\u201D]?\s/gi);

                var verdict = $('<dl/>');
                verdict.addClass("dl-horizontal");
                var numWrong = 0;

                for (i = 0; i < sentences.length; ++i)
                {
                    ourLength = sentences[i].split(' ').length;
                    if (ourLength > limit)
                    {
                        $("<dt/>").text(ourLength + " words").appendTo(verdict);
                        $("<dd/>").text(sentences[i]).appendTo(verdict);
                        ++numWrong;
                    }
                }

                if (numWrong > 0)
                {
                    $("<h4/>").text("We found " + numWrong + " " + "sentence".pluralize(numWrong)
                            + " over " + limit + " words:").appendTo($("#output"));
                    $("#output").append(verdict);
                }
                else
                {
                    $("#output").append($("<h4/>").text("Congratulations - we couldn't find anything wrong."))
                }
            });
        });
        </script>
    </head>
    <body>
        <div class="container">
            <h1>The Burgeinator</h1>
            <p>
                Copy and paste your essay below, then click the button. It's definitely possible that we
                overlook something;
                in particular, something like "W.V.O. Quine." shows up as two sentences of one word each.
            </p>

            <form action="javascript:void(0)">
                <div class="form-group">
                    <label for="essay">Essay:</label>
                    <textarea style="font-family:sans-serif" rows="10" class="form-control" id="essay"></textarea>
                </div>
                <div class="form-group">
                    <label for="limit">Word limit:</label>
                    <input type="text" class="form-control" id="limit" value="16"/>
                    <div id="error" style="color:#f00"></div>
                </div>
                <div class="form-group"><button type="submit" class="btn btn-default" id="burgeinate">Burgeinate!</button></div>
            </form>

            <p id="output" style="padding-top:25px"></p>
        </div>
    </body>
</html>
